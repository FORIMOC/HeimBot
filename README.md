# HelmBot V0.1.0

<u>2022/1/17</u>



## 此版本新增改进：

数据收集功能初步建立，能够收集的数据包括以下

- 记录所有消息的内容、发送者以及发送群
- 对于每一个发送者，持续更新不同群聊中的发送消息总次数
- 对于每一条消息，记录该消息的前5条消息的发送者id



## 此版本的数据库接口



Hoshino_status表：机器人状态控制

| 列名     | 类型    | 说明                       |
| -------- | ------- | -------------------------- |
| id       | int(11) | 主键                       |
| group_id | int(11) | 群id                       |
| status   | int(11) | 监听状态(1为开启，0为关闭) |

Hoshino\_users表：记录每个发言用户

| 列名     | 类型    | 说明           |
| -------- | ------- | -------------- |
| id       | int(11) | 主键           |
| user_id  | int(11) | 用户id         |
| group_id | int(11) | 所在群id       |
| freq     | int(11) | 发送消息总次数 |

Hoshino\_messages表：记录每条消息

| 列名          | 类型          | 说明                        |
| ------------- | ------------- | --------------------------- |
| id            | int(11)       | 主键                        |
| user_id       | int(11)       | 发送消息的用户id            |
| group_id      | int(11)       | 该消息所在的群id            |
| time          | int(11)       | 时间戳                      |
| content       | varchar(1000) | 内容                        |
| pre_5users_id | varchar(80)   | 该消息的前5条消息的发送者id |

Hoshino_premessages表：缓存每条消息的前5条消息

| 列名     | 类型    | 说明                                         |
| -------- | ------- | -------------------------------------------- |
| id       | int(11) | 主键                                         |
| user_id  | int(11) | 发送消息的用户id                             |
| group_id | int(11) | 该消息所在的群id                             |
| mark     | int(11) | 先后顺序标记(1~5，1为距离该条消息最近的消息) |

